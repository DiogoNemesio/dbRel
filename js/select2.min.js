(function(a){"undefined"==typeof a.fn.each2&&a.fn.extend({each2:function(d){for(var e=a([0]),b=-1,c=this.length;++b<c&&(e.context=e[0]=this[b])&&!1!==d.call(e[0],b,e);){}return this}})})(jQuery);(function(ab,Z){function W(f,e){for(var k=0,h=e.length;k<h;k+=1){if(X(f,e[k])){return k}}return -1}function X(f,e){return f===e?!0:f===Z||e===Z||null===f||null===e?!1:f.constructor===String?f===e+"":e.constructor===String?e===f+"":!1}function q(f,e){var m,k,h;if(null===f||1>f.length){return[]}m=f.split(e);k=0;for(h=m.length;k<h;k+=1){m[k]=ab.trim(m[k])}return m}function R(e){e.bind("keydown",function(){ab.data(e,"keyup-change-value")===Z&&ab.data(e,"keyup-change-value",e.val())});e.bind("keyup",function(){var f=ab.data(e,"keyup-change-value");f!==Z&&e.val()!==f&&(ab.removeData(e,"keyup-change-value"),e.trigger("keyup-change"))})}function Q(f,e,k){k=k||Z;var h;return function(){var m=arguments;window.clearTimeout(h);h=window.setTimeout(function(){e.apply(k,m)},f)}}function P(e){e[0]!==document.activeElement&&window.setTimeout(function(){var f=e[0],h=e.val().length;e.focus();f.setSelectionRange?f.setSelectionRange(h,h):f.createTextRange&&(f=f.createTextRange(),f.collapse(!0),f.moveEnd("character",h),f.moveStart("character",h),f.select())},0)}function Y(e){e.preventDefault();e.stopPropagation()}function i(f,e,n){var m,h=[],k;m=f.attr("class");"string"===typeof m&&ab(m.split(" ")).each2(function(){0===this.indexOf("select2-")&&h.push(this)});m=e.attr("class");"string"===typeof m&&ab(m.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(k=n(this),"string"===typeof k&&0<k.length&&h.push(this))});f.attr("class",h.join(" "))}function t(f,e,m,k){var h=f.toUpperCase().indexOf(e.toUpperCase());e=e.length;0>h?m.push(k(f)):(m.push(k(f.substring(0,h))),m.push("<span class='select2-match'>"),m.push(k(f.substring(h,h+e))),m.push("</span>"),m.push(k(f.substring(h+e,f.length))))}function p(h){var e,r=0,n=null,k=h.quietMillis||100,m=h.url,f=this;return function(u){window.clearTimeout(e);e=window.setTimeout(function(){var w=r+=1,A=h.data,v=m,z=h.transport||ab.ajax,B=h.type||"GET",y={},A=A?A.call(f,u.term,u.page,u.context):null,v="function"===typeof v?v.call(f,u.term,u.page,u.context):v;null!==n&&n.abort();h.params&&(ab.isFunction(h.params)?ab.extend(y,h.params.call(f)):ab.extend(y,h.params));ab.extend(y,{url:v,dataType:h.dataType,data:A,type:B,cache:!1,success:function(C){w<r||(C=h.results(C,u.page),u.callback(C))}});n=z.call(f,y)},k)}}function o(f){var e=f,m,k,h=function(n){return""+n.text};ab.isArray(e)&&(k=e,e={results:k});!1===ab.isFunction(e)&&(k=e,e=function(){return k});f=e();f.text&&(h=f.text,ab.isFunction(h)||(m=e.text,h=function(n){return n[m]}));return function(n){var v=n.term,u={results:[]},r;""===v?n.callback(e()):(r=function(w,A){var y,z;w=w[0];if(w.children){y={};for(z in w){w.hasOwnProperty(z)&&(y[z]=w[z])}y.children=[];ab(w.children).each2(function(C,B){r(B,y.children)});(y.children.length||n.matcher(v,h(y),w))&&A.push(y)}else{n.matcher(v,h(w),w)&&A.push(w)}},ab(e().results).each2(function(y,w){r(w,u.results)}),n.callback(u))}}function j(f){var e=ab.isFunction(f);return function(m){var k=m.term,h={results:[]};ab(e?f():f).each(function(){var r=this.text!==Z,n=r?this.text:this;if(""===k||m.matcher(k,n)){h.results.push(r?this:{id:this,text:this})}});m.callback(h)}}function l(e){if(ab.isFunction(e)){return !0}if(!e){return !1}throw Error("formatterName must be a function or a falsy value")}function T(e){return ab.isFunction(e)?e():e}function g(f){var e=0;ab.each(f,function(h,k){k.children?e+=g(k.children):e++});return e}function b(z,y,w,v){var n=z,u=!1,k,m,r,h;if(!v.createSearchChoice||!v.tokenSeparators||1>v.tokenSeparators.length){return Z}for(;;){u=-1;m=0;for(r=v.tokenSeparators.length;m<r&&!(h=v.tokenSeparators[m],u=z.indexOf(h),0<=u);m++){}if(0>u){break}k=z.substring(0,u);z=z.substring(u+h.length);if(0<k.length&&(k=v.createSearchChoice(k,y),k!==Z&&null!==k&&v.id(k)!==Z&&null!==v.id(k))){u=!1;m=0;for(r=y.length;m<r;m++){if(X(v.id(k),v.id(y[m]))){u=!0;break}}u||w(k)}}if(n!==z){return z}}function V(f,e){var h=function(){};h.prototype=new f;h.prototype.constructor=h;h.prototype.parent=f.prototype;h.prototype=ab.extend(h.prototype,e);return h}if(window.Select2===Z){var aa,x,U,S,d,s,c;aa={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case aa.LEFT:case aa.RIGHT:case aa.UP:case aa.DOWN:return !0}return !1},isControl:function(e){switch(e.which){case aa.SHIFT:case aa.CTRL:case aa.ALT:return !0}return e.metaKey?!0:!1},isFunctionKey:function(e){e=e.which?e.which:e;return 112<=e&&123>=e}};x=ab(document);var a=1;d=function(){return a++};x.bind("mousemove",function(e){c={x:e.pageX,y:e.pageY}});x=V(Object,{bind:function(f){var e=this;return function(){f.apply(e,arguments)}},init:function(h){var e,r;this.opts=h=this.prepareOpts(h);this.id=h.id;h.element.data("select2")!==Z&&null!==h.element.data("select2")&&this.destroy();this.enabled=!0;this.container=this.createContainer();this.containerId="s2id_"+(h.element.attr("id")||"autogen"+d());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var n=!1,k;this.body=function(){!1===n&&(k=h.element.closest("body"),n=!0);return k};i(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.css(T(h.containerCss));this.container.addClass(T(h.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabIndex");this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){ab(this).select2("focus")}).attr("tabIndex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(T(h.dropdownCssClass));this.dropdown.data("select2",this);this.results=e=this.container.find(".select2-results");this.search=r=this.container.find("input.select2-input");r.attr("tabIndex",this.elementTabIndex);this.resultsPage=0;this.context=null;this.initContainer();this.results.bind("mousemove",function(v){var u=c;(u===Z||u.x!==v.pageX||u.y!==v.pageY)&&ab(v.target).trigger("mousemove-filtered",v)});this.dropdown.delegate(".select2-results","mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent));var m=this.results,f=Q(80,function(u){m.trigger("scroll-debounced",u)});m.bind("scroll",function(u){0<=W(u.target,m.get())&&f(u)});this.dropdown.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded));ab.fn.mousewheel&&e.mousewheel(function(u,y,w,v){y=e.scrollTop();0<v&&0>=y-v?(e.scrollTop(0),Y(u)):0>v&&e.get(0).scrollHeight-e.scrollTop()+v<=e.height()&&(e.scrollTop(e.get(0).scrollHeight-e.height()),Y(u))});R(r);r.bind("keyup-change input paste",this.bind(this.updateResults));r.bind("focus",function(){r.addClass("select2-focused")});r.bind("blur",function(){r.removeClass("select2-focused")});this.dropdown.delegate(".select2-results","mouseup",this.bind(function(u){0<ab(u.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(u),this.selectHighlighted(u))}));this.dropdown.bind("click mouseup mousedown",function(u){u.stopPropagation()});ab.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());(h.element.is(":disabled")||h.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);e!==Z&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(f){var e,k,h;e=f.element;"select"===e.get(0).tagName.toLowerCase()&&(this.select=k=f.element);k&&ab.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in f){throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}});f=ab.extend({},{populateResults:function(m,w,v){var n,u=this.opts.id,r=this;n=function(F,E,D){var z,C,B,A,y,G,H;F=f.sortResults(F,E,v);z=0;for(C=F.length;z<C;z+=1){B=F[z],y=!0===B.disabled,A=!y&&u(B)!==Z,G=B.children&&0<B.children.length,H=ab("<li></li>"),H.addClass("select2-results-dept-"+D),H.addClass("select2-result"),H.addClass(A?"select2-result-selectable":"select2-result-unselectable"),y&&H.addClass("select2-disabled"),G&&H.addClass("select2-result-with-children"),H.addClass(r.opts.formatResultCssClass(B)),A=ab(document.createElement("div")),A.addClass("select2-result-label"),y=f.formatResult(B,A,v,r.opts.escapeMarkup),y!==Z&&A.html(y),H.append(A),G&&(G=ab("<ul></ul>"),G.addClass("select2-result-sub"),n(B.children,G,D+1),H.append(G)),H.data("select2-data",B),E.append(H)}};n(w,m,0)}},ab.fn.select2.defaults,f);"function"!==typeof f.id&&(h=f.id,f.id=function(m){return m[h]});if(ab.isArray(f.element.data("select2Tags"))){if("tags" in f){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+f.element.attr("id")}f.tags=f.element.attr("data-select2-tags")}if(k){f.query=this.bind(function(m){var w={results:[],more:!1},v=m.term,n,u,r;r=function(y,A){var z;y.is("option")?m.matcher(v,y.text(),y)&&A.push({id:y.attr("value"),text:y.text(),element:y.get(),css:y.attr("class"),disabled:X(y.attr("disabled"),"disabled")}):y.is("optgroup")&&(z={text:y.attr("label"),children:[],element:y.get(),css:y.attr("class")},y.children().each2(function(C,B){r(B,z.children)}),0<z.children.length&&A.push(z))};n=e.children();this.getPlaceholder()!==Z&&0<n.length&&(u=n[0],""===ab(u).text()&&(n=n.not(u)));n.each2(function(z,y){r(y,w.results)});m.callback(w)}),f.id=function(m){return m.id},f.formatResultCssClass=function(m){return m.css}}else{if(!("query" in f)){if("ajax" in f){if((k=f.element.data("ajax-url"))&&0<k.length){f.ajax.url=k}f.query=p.call(f.element,f.ajax)}else{"data" in f?f.query=o(f.data):"tags" in f&&(f.query=j(f.tags),f.createSearchChoice===Z&&(f.createSearchChoice=function(m){return{id:m,text:m}}),f.initSelection===Z&&(f.initSelection=function(m,r){var n=[];ab(q(m.val(),f.separator)).each(function(){var u=this,w=this,v=f.tags;ab.isFunction(v)&&(v=v());ab(v).each(function(){if(X(this.id,u)){return w=this.text,!1}});n.push({id:u,text:w})});r(n)}))}}}if("function"!==typeof f.query){throw"query function not defined for Select2 "+f.element.attr("id")}return f},monitorSource:function(){var f=this.opts.element,e;f.bind("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}));e=this.bind(function(){var k,h;k="disabled"!==this.opts.element.attr("disabled");h="readonly"===this.opts.element.attr("readonly");k=k&&!h;this.enabled!==k&&(k?this.enable():this.disable());i(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(T(this.opts.containerCssClass));i(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(T(this.opts.dropdownCssClass))});f.bind("propertychange.select2 DOMAttrModified.select2",e);"undefined"!==typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(h){h.forEach(e)}),this.propertyObserver.observe(f.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(e){e=e||{};e=ab.extend({},e,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(e);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var B=this.container.offset(),A=this.container.outerHeight(!1),z=this.container.outerWidth(!1),y=this.dropdown.outerHeight(!1),v=ab(window).scrollLeft()+ab(window).width(),m=ab(window).scrollTop()+ab(window).height(),A=B.top+A,w=B.left,m=A+y<=m,r=B.top-y>=this.body().scrollTop(),u=this.dropdown.outerWidth(!1),v=w+u<=v,e=this.dropdown.hasClass("select2-drop-above"),n;"static"!==this.body().css("position")&&(n=this.body().offset(),A-=n.top,w-=n.left);e?(e=!0,!r&&m&&(e=!1)):(e=!1,!m&&r&&(e=!0));v||(w=B.left+z-u);e?(A=B.top-y,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above"));B=ab.extend({top:A,left:w,width:z},T(this.opts.dropdownCss));this.dropdown.css(B)},shouldOpen:function(){var e;if(this.opened()){return !1}e=ab.Event("opening");this.opts.element.trigger(e);return !e.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return !1}window.setTimeout(this.bind(this.opening),1);return !0},opening:function(){var f=this.containerId,e="scroll."+f,m="resize."+f,k="orientationchange."+f;this.clearDropdownAlignmentPreference();this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());this.updateResults(!0);f=ab("#select2-drop-mask");0==f.length&&(f=ab(document.createElement("div")),f.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body()),f.bind("mousedown touchstart",function(){var n=ab("#select2-drop");0<n.length&&(n=n.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close())}));this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f);ab("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");f.css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight});f.show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();var h=this;this.container.parents().add(window).each(function(){ab(this).bind(m+" "+e+" "+k,function(){ab("#select2-drop-mask").css({width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight});h.positionDropdown()})});this.focusSearch()},close:function(){if(this.opened()){var f=this.containerId,e="scroll."+f,k="resize."+f,h="orientationchange."+f;this.container.parents().add(window).each(function(){ab(this).unbind(e).unbind(k).unbind(h)});this.clearDropdownAlignmentPreference();ab("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open");this.results.empty();this.clearSearch();this.opts.element.trigger(ab.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var f=this.results,e,m,k,h;m=this.highlight();0>m||(0==m?f.scrollTop(0):(e=this.findHighlightableChoices(),k=ab(e[m]),h=k.offset().top+k.outerHeight(!0),m===e.length-1&&(e=f.find("li.select2-more-results"),0<e.length&&(h=e.offset().top+e.outerHeight(!0))),e=f.offset().top+f.outerHeight(!0),h>e&&f.scrollTop(f.scrollTop()+(h-e)),h=k.offset().top-f.offset().top,0>h&&"none"!=k.css("display")&&f.scrollTop(f.scrollTop()+h)))},findHighlightableChoices:function(){this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)");return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(f){for(var e=this.findHighlightableChoices(),k=this.highlight();-1<k&&k<e.length;){var k=k+f,h=ab(e[k]);if(h.hasClass("select2-result-selectable")&&!h.hasClass("select2-disabled")&&!h.hasClass("select2-selected")){this.highlight(k);break}}},highlight:function(f){var e=this.findHighlightableChoices();if(0===arguments.length){return W(e.filter(".select2-highlighted")[0],e.get())}f>=e.length&&(f=e.length-1);0>f&&(f=0);this.results.find(".select2-highlighted").removeClass("select2-highlighted");e=ab(e[f]);e.addClass("select2-highlighted");this.ensureHighlightVisible();(e=e.data("select2-data"))&&this.opts.element.trigger({type:"highlight",val:this.id(e),choice:e})},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(f){f=ab(f.target).closest(".select2-result-selectable");if(0<f.length&&!f.is(".select2-highlighted")){var e=this.findHighlightableChoices();this.highlight(e.index(f))}else{0==f.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")}},loadMoreIfNeeded:function(){var k=this.results,h=k.find("li.select2-more-results"),v,u=this.resultsPage+1,m=this,r=this.search.val(),n=this.context;0!==h.length&&(v=h.offset().top-k.offset().top-k.height(),v<=this.opts.loadMorePadding&&(h.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:u,context:n,matcher:this.opts.matcher,callback:this.bind(function(e){m.opened()&&(m.opts.populateResults.call(this,k,e.results,{term:r,page:u,context:n}),!0===e.more?(h.detach().appendTo(k).text(m.opts.formatLoadMore(u+1)),window.setTimeout(function(){m.loadMoreIfNeeded()},10)):h.remove(),m.positionDropdown(),m.resultsPage=u,m.context=e.context)})})))},tokenize:function(){},updateResults:function(y){function w(){n.scrollTop(0);u.removeClass("select2-active");m.positionDropdown()}function v(f){n.html(f);w()}var u=this.search,n=this.results,r=this.opts,e,m=this;if(!(!0!==y&&(!1===this.showSearchInput||!this.opened()))){u.addClass("select2-active");var h=this.getMaximumSelectionSize();if(1<=h&&(e=this.data(),ab.isArray(e)&&e.length>=h&&l(r.formatSelectionTooBig,"formatSelectionTooBig"))){v("<li class='select2-selection-limit'>"+r.formatSelectionTooBig(h)+"</li>");return}u.val().length<r.minimumInputLength?l(r.formatInputTooShort,"formatInputTooShort")?v("<li class='select2-no-results'>"+r.formatInputTooShort(u.val(),r.minimumInputLength)+"</li>"):v(""):(r.formatSearching()&&!0===y&&v("<li class='select2-searching'>"+r.formatSearching()+"</li>"),r.maximumInputLength&&u.val().length>r.maximumInputLength?l(r.formatInputTooLong,"formatInputTooLong")?v("<li class='select2-no-results'>"+r.formatInputTooLong(u.val(),r.maximumInputLength)+"</li>"):v(""):(e=this.tokenize(),e!=Z&&null!=e&&u.val(e),this.resultsPage=1,r.query({element:r.element,term:u.val(),page:this.resultsPage,context:null,matcher:r.matcher,callback:this.bind(function(f){var z;this.opened()&&(this.context=f.context===Z?null:f.context,this.opts.createSearchChoice&&""!==u.val()&&(z=this.opts.createSearchChoice.call(null,u.val(),f.results),z!==Z&&null!==z&&m.id(z)!==Z&&null!==m.id(z)&&0===ab(f.results).filter(function(){return X(m.id(this),m.id(z))}).length&&f.results.unshift(z)),0===f.results.length&&l(r.formatNoMatches,"formatNoMatches")?v("<li class='select2-no-results'>"+r.formatNoMatches(u.val())+"</li>"):(n.empty(),m.opts.populateResults.call(this,n,f.results,{term:u.val(),page:this.resultsPage,context:null}),!0===f.more&&l(r.formatLoadMore,"formatLoadMore")&&(n.append("<li class='select2-more-results'>"+m.opts.escapeMarkup(r.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){m.loadMoreIfNeeded()},10)),this.postprocessResults(f,y),w()))})})))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){P(this.search)},selectHighlighted:function(f){var e=this.highlight(),h=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");h&&(this.highlight(e),this.onSelect(h,f))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){var e=function(){var f,m,k,h;if("off"===this.opts.width){return null}if("element"===this.opts.width){return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"}if("copy"===this.opts.width||"resolve"===this.opts.width){f=this.opts.element.attr("style");if(f!==Z){f=f.split(";");k=0;for(h=f.length;k<h;k+=1){if(m=f[k].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==m&&1<=m.length){return m[1]}}}return"resolve"===this.opts.width?(f=this.opts.element.css("width"),0<f.indexOf("%")?f:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return ab.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==e&&this.container.css("width",e)}});U=V(x,{createContainer:function(){return ab(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>   <div><b></b></div></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop' style='display:none'>   <div class='select2-search'>       <input type='text' autocomplete='off' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments);this.focusser.attr("disabled","disabled");this.opts.element.trigger(ab.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),P(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},initContainer:function(){var f,e=this.container,h=this.dropdown;this.showSearch(0<=this.opts.minimumResultsForSearch);this.selection=f=e.find(".select2-choice");this.focusser=e.find(".select2-focusser");this.search.bind("keydown",this.bind(function(k){if(this.enabled){if(k.which===aa.PAGE_UP||k.which===aa.PAGE_DOWN){Y(k)}else{switch(k.which){case aa.UP:case aa.DOWN:this.moveHighlight(k.which===aa.UP?-1:1);Y(k);break;case aa.TAB:case aa.ENTER:this.selectHighlighted();Y(k);break;case aa.ESC:this.cancel(k),Y(k)}}}}));this.focusser.bind("keydown",this.bind(function(k){if(this.enabled&&!(k.which===aa.TAB||aa.isControl(k)||aa.isFunctionKey(k)||k.which===aa.ESC)){if(!1===this.opts.openOnEnter&&k.which===aa.ENTER){Y(k)}else{if(k.which==aa.DOWN||k.which==aa.UP||k.which==aa.ENTER&&this.opts.openOnEnter){this.open(),Y(k)}else{if(k.which==aa.DELETE||k.which==aa.BACKSPACE){this.opts.allowClear&&this.clear(),Y(k)}}}}}));R(this.focusser);this.focusser.bind("keyup-change input",this.bind(function(k){this.opened()||(this.open(),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.focusser.val(""),Y(k))}));f.delegate("abbr","mousedown",this.bind(function(k){this.enabled&&(this.clear(),k.preventDefault(),k.stopImmediatePropagation(),this.close(),this.selection.focus())}));f.bind("mousedown",this.bind(function(k){this.opened()?this.close():this.enabled&&this.open();Y(k)}));h.bind("mousedown",this.bind(function(){this.search.focus()}));f.bind("focus",this.bind(function(k){Y(k)}));this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")}));this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}));this.initContainerWidth();this.setPlaceholder()},clear:function(){var e=this.selection.data("select2-data");this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder();this.opts.element.trigger({type:"removed",val:this.id(e),choice:e});this.triggerChange({removed:e})},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()){this.close(),this.setPlaceholder()}else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(f){f!==Z&&null!==f&&(e.updateSelection(f),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(f,k){var h=f.find(":selected");ab.isFunction(k)&&k({id:h.attr("value"),text:h.text(),element:h})}:"data" in e&&(e.initSelection=e.initSelection||function(f,k){var h=f.val();e.query({matcher:function(m,r,n){return X(h,e.id(n))},callback:!ab.isFunction(k)?ab.noop:function(m){k(m.results.length?m.results[0]:null)}})});return e},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?Z:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();""===this.opts.element.val()&&e!==Z&&!(this.select&&""!==this.select.find("option:first").text())&&(this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide())},postprocessResults:function(h,f){var n=0,m=this,k=!0;this.findHighlightableChoices().each2(function(r,e){if(X(m.id(e.data("select2-data")),m.opts.element.val())){return n=r,!1}});this.highlight(n);!0===f&&(k=this.opts.minimumResultsForSearch,k=0>k?!1:g(h.results)>=k,this.showSearch(k))},showSearch:function(e){this.showSearchInput=e;this.dropdown.find(".select2-search")[e?"removeClass":"addClass"]("select2-search-hidden");ab(this.dropdown,this.container)[e?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(f,e){var h=this.opts.element.val();this.opts.element.val(this.id(f));this.updateSelection(f);this.opts.element.trigger({type:"selected",val:this.id(f),choice:f});this.close();(!e||!e.noFocus)&&this.selection.focus();X(h,this.id(f))||this.triggerChange()},updateSelection:function(f){var e=this.selection.find("span");this.selection.data("select2-data",f);e.empty();f=this.opts.formatSelection(f,e);f!==Z&&e.append(this.opts.escapeMarkup(f));this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==Z&&this.selection.find("abbr").show()},val:function(){var f,e=!1,k=null,h=this;if(0===arguments.length){return this.opts.element.val()}f=arguments[0];1<arguments.length&&(e=arguments[1]);if(this.select){this.select.val(f).find(":selected").each2(function(n,m){k={id:m.attr("value"),text:m.text()};return !1}),this.updateSelection(k),this.setPlaceholder(),e&&this.triggerChange()}else{if(this.opts.initSelection===Z){throw Error("cannot call val() if initSelection() is not defined")}!f&&0!==f?(this.clear(),e&&this.triggerChange()):(this.opts.element.val(f),this.opts.initSelection(this.opts.element,function(m){h.opts.element.val(!m?"":h.id(m));h.updateSelection(m);h.setPlaceholder();e&&h.triggerChange()}))}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(f){var e;if(0===arguments.length){return e=this.selection.data("select2-data"),e==Z&&(e=null),e}!f||""===f?this.clear():(this.opts.element.val(!f?"":this.id(f)),this.updateSelection(f))}});S=V(x,{createContainer:function(){return ab(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("    <ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi' style='display:none;'>   <ul class='select2-results'>   </ul></div>")},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(f,k){var h=[];f.find(":selected").each2(function(n,m){h.push({id:m.attr("value"),text:m.text(),element:m[0]})});k(h)}:"data" in e&&(e.initSelection=e.initSelection||function(f,k){var h=q(f.val(),e.separator);e.query({matcher:function(m,r,n){return ab.grep(h,function(u){return X(u,e.id(n))}).length},callback:!ab.isFunction(k)?ab.noop:function(m){k(m.results)}})});return e},initContainer:function(){var e;this.searchContainer=this.container.find(".select2-search-field");this.selection=e=this.container.find(".select2-choices");this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())}));this.search.bind("keydown",this.bind(function(f){if(this.enabled){if(f.which===aa.BACKSPACE&&""===this.search.val()){this.close();var h;h=e.find(".select2-search-choice-focus");if(0<h.length){this.unselect(h.first());this.search.width(10);Y(f);return}h=e.find(".select2-search-choice:not(.select2-locked)");0<h.length&&h.last().addClass("select2-search-choice-focus")}else{e.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")}if(this.opened()){switch(f.which){case aa.UP:case aa.DOWN:this.moveHighlight(f.which===aa.UP?-1:1);Y(f);return;case aa.ENTER:case aa.TAB:this.selectHighlighted();Y(f);return;case aa.ESC:this.cancel(f);Y(f);return}}f.which===aa.TAB||aa.isControl(f)||aa.isFunctionKey(f)||f.which===aa.BACKSPACE||f.which===aa.ESC||f.which===aa.ENTER&&(!1===this.opts.openOnEnter||f.altKey||f.ctrlKey||f.shiftKey||f.metaKey)||(this.open(),(f.which===aa.PAGE_UP||f.which===aa.PAGE_DOWN)&&Y(f))}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(f){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.opened()||this.clearSearch();f.stopImmediatePropagation()}));this.container.delegate(".select2-choices","mousedown",this.bind(function(f){this.enabled&&!(0<ab(f.target).closest(".select2-search-choice").length)&&(this.clearPlaceholder(),this.open(),this.focusSearch(),f.preventDefault())}));this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(f){f!==Z&&null!==f&&(e.updateSelection(f),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==Z&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.resizeSearch()):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch();this.opts.element.trigger(ab.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus();this.opts.element.triggerHandler("focus")},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(f){var e=[],k=[],h=this;ab(f).each(function(){0>W(h.id(this),e)&&(e.push(h.id(this)),k.push(this))});f=k;this.selection.find(".select2-search-choice").remove();ab(f).each(function(){h.addSelectedChoice(this)});h.postprocessResults()},tokenize:function(){var e=this.search.val(),e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts);null!=e&&e!=Z&&(this.search.val(e),0<e.length&&this.open())},onSelect:function(f,e){this.addSelectedChoice(f);this.opts.element.trigger({type:"selected",val:this.id(f),choice:f});(this.select||!this.opts.closeOnSelect)&&this.postprocessResults();this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10));this.triggerChange({added:f});(!e||!e.noFocus)&&this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(h){var e=!h.locked,r=ab("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),n=ab("<li class='select2-search-choice select2-locked'><div></div></li>"),r=e?r:n,n=this.id(h),k=this.getVal(),m;m=this.opts.formatSelection(h,r.find("div"));m!=Z&&r.find("div").replaceWith("<div>"+this.opts.escapeMarkup(m)+"</div>");e&&r.find(".select2-search-choice-close").bind("mousedown",Y).bind("click dblclick",this.bind(function(f){this.enabled&&(ab(f.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(ab(f.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue(),Y(f))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));r.data("select2-data",h);r.insertBefore(this.searchContainer);k.push(n);this.setVal(k)},unselect:function(f){var e=this.getVal(),k,h;f=f.closest(".select2-search-choice");if(0===f.length){throw"Invalid argument: "+f+". Must be .select2-search-choice"}if(k=f.data("select2-data")){h=W(this.id(k),e),0<=h&&(e.splice(h,1),this.setVal(e),this.select&&this.postprocessResults()),f.remove(),this.opts.element.trigger({type:"removed",val:this.id(k),choice:k}),this.triggerChange({removed:k})}},postprocessResults:function(){var f=this.getVal(),e=this.results.find(".select2-result"),k=this.results.find(".select2-result-with-children"),h=this;e.each2(function(m,r){var n=h.id(r.data("select2-data"));0<=W(n,f)&&(r.addClass("select2-selected"),r.find(".select2-result-selectable").addClass("select2-selected"))});k.each2(function(n,m){!m.is(".select2-result-selectable")&&0===m.find(".select2-result-selectable:not(.select2-selected)").length&&m.addClass("select2-selected")});-1==this.highlight()&&h.highlight(0)},resizeSearch:function(){var h,e,n,m,k=this.search.outerWidth(!1)-this.search.width();h=this.search;s||(n=h[0].currentStyle||window.getComputedStyle(h[0],null),s=ab(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),s.attr("class","select2-sizer"),ab("body").append(s));s.text(h.val());h=s.width()+10;e=this.search.offset().left;n=this.selection.width();m=this.selection.offset().left;e=n-(e-m)-k;e<h&&(e=n-k);40>e&&(e=n-k);0>=e&&(e=h);this.search.width(e)},getVal:function(){var e;if(this.select){return e=this.select.val(),null===e?[]:e}e=this.opts.element.val();return q(e,this.opts.separator)},setVal:function(f){var e;this.select?this.select.val(f):(e=[],ab(f).each(function(){0>W(this,e)&&e.push(this)}),this.opts.element.val(0===e.length?"":e.join(this.opts.separator)))},val:function(){var f,e=!1,h=this;if(0===arguments.length){return this.getVal()}f=arguments[0];1<arguments.length&&(e=arguments[1]);if(!f&&0!==f){this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),e&&this.triggerChange()}else{this.setVal(f);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection)),e&&this.triggerChange()}else{if(this.opts.initSelection===Z){throw Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(k){var m=ab(k).map(h.id);h.setVal(m);h.updateSelection(k);h.clearSearch();e&&h.triggerChange()})}this.clearSearch()}},onSortStart:function(){if(this.select){throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var f=[],e=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){f.push(e.opts.id(ab(this).data("select2-data")))});this.setVal(f);this.triggerChange()},data:function(f){var e=this,h;if(0===arguments.length){return this.selection.find(".select2-search-choice").map(function(){return ab(this).data("select2-data")}).get()}f||(f=[]);h=ab.map(f,function(k){return e.opts.id(k)});this.setVal(h);this.updateSelection(f);this.clearSearch()}});ab.fn.select2=function(){var h=Array.prototype.slice.call(arguments,0),e,u,r,n,m="val destroy opened open close focus isFocused container onSortStart onSortEnd enable disable positionDropdown data".split(" ");this.each(function(){if(0===h.length||"object"===typeof h[0]){e=0===h.length?{}:ab.extend({},h[0]),e.element=ab(this),"select"===e.element.get(0).tagName.toLowerCase()?n=e.element.attr("multiple"):(n=e.multiple||!1,"tags" in e&&(e.multiple=n=!0)),u=n?new S:new U,u.init(e)}else{if("string"===typeof h[0]){if(0>W(h[0],m)){throw"Unknown method: "+h[0]}r=Z;u=ab(this).data("select2");if(u!==Z&&(r="container"===h[0]?u.container:u[h[0]].apply(u,h.slice(1)),r!==Z)){return !1}}else{throw"Invalid arguments to select2 plugin: "+h}}});return r===Z?this:r};ab.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(f,e,k,h){e=[];t(f.text,k.term,e,h);return e.join("")},formatSelection:function(e){return e?e.text:Z},sortResults:function(e){return e},formatResultCssClass:function(){return Z},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(f,e){var h=e-f.length;return"Please enter "+h+" more character"+(1==h?"":"s")},formatInputTooLong:function(f,e){var h=f.length-e;return"Please enter "+h+" less character"+(1==h?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(f,e){return 0<=e.toUpperCase().indexOf(f.toUpperCase())},separator:",",tokenSeparators:[],tokenizer:b,escapeMarkup:function(f){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(f).replace(/[&<>"'/\\]/g,function(h){return e[h[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}};window.Select2={query:{ajax:p,local:o,tags:j},util:{debounce:Q,markMatch:t},"class":{"abstract":x,single:U,multi:S}}}})(jQuery);